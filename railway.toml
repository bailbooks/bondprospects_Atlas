# Railway.toml - Configuration for Railway deployment

[build]
builder = "nixpacks"
buildCommand = "cd backend && npm install && npx prisma generate && npx prisma db push && cd ../frontend && npm install && npm run build && cp -r dist ../backend/public"

[deploy]
startCommand = "cd backend && NODE_ENV=production node src/index.js"
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[nixpacks]
providers = ["node"]
